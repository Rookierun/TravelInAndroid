# TravelInAndroid. 

# 三。性能优化：2021-09-01～2021-09-30.
## 09-03 内存性能优化
### 1.JVM内存模型
    1.线程私有区
        程序计数器：记录程序执行位置
        虚拟机栈：局部变量，方法的返回i地址等
            OOM StackOverflow会发生在这里
            不会产生内存碎片
        本地方法栈
    2.共享数据区
        堆：对象&数组
            OOM
            GC的主要区域
        方法区：
            常量池：
                静态变量，类，接口，方法名等
### GC
    1.内存回收策略
        1.引用计数算法，循环引用不回收
        2.可达性分析算法：
            关键是GCRoot，当前对象是否可以达到GCRoot
    2.四种引用：
        强引用：内存不足也不会回收
        软引用：内存不足时，回收
        弱引用：第一次GC时标记，第二次GC时回收
        虚引用：回收时，拿到通知，得不到具体对象的引用
    3.工具
        1.AS-Memory Profiler
        2。platform-tools->hprof conv.exe->hprof -z infile ouputfile->xxx.hprof-->Eclipse Memory Analyzer(MAT)
            -z:排除zygote的heap信息
    4.处理方案
        1.对于源码or第三方代码：采用反射，切开引用链
